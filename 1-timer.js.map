{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst dateField = document.getElementById('datetime-picker');\nconst activateBtn = document.querySelector('[data-start]');\nlet targetDate = null;\n\nconst calendarOptions = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(dates) {\n        targetDate = dates[0];\n        checkStartBtn(targetDate);\n    },\n};\n\nflatpickr(dateField, calendarOptions);\n\nactivateBtn.addEventListener('click', startCountdown);\n\nfunction startCountdown() {\n    activateBtn.disabled = true;\n    dateField.disabled = true;\n\n    const countdownTimer = setInterval(() => {\n        const remainingTime = targetDate - new Date();\n\n        if (remainingTime <= 0) {\n            clearInterval(countdownTimer);\n            displayTime(0, 0, 0, 0);\n            resetInputs(); // Сброс активных элементов после остановки таймера\n            return;\n        }\n\n        const timeValues = convertMilliseconds(remainingTime);\n        displayTime(timeValues.days, timeValues.hours, timeValues.minutes, timeValues.seconds);\n    }, 1000);\n}\n\nfunction convertMilliseconds(ms) {\n    const secondsInMs = 1000;\n    const minutesInMs = secondsInMs * 60;\n    const hoursInMs = minutesInMs * 60;\n    const daysInMs = hoursInMs * 24;\n\n    return {\n        days: Math.floor(ms / daysInMs),\n        hours: Math.floor((ms % daysInMs) / hoursInMs),\n        minutes: Math.floor(((ms % daysInMs) % hoursInMs) / minutesInMs),\n        seconds: Math.floor((((ms % daysInMs) % hoursInMs) % minutesInMs) / secondsInMs),\n    };\n}\n\nfunction displayTime(days, hours, minutes, seconds) {\n    document.querySelector('[data-days]').textContent = padZero(days);\n    document.querySelector('[data-hours]').textContent = padZero(hours);\n    document.querySelector('[data-minutes]').textContent = padZero(minutes);\n    document.querySelector('[data-seconds]').textContent = padZero(seconds);\n}\n\nfunction padZero(value) {\n    return String(value).padStart(2, '0');\n}\n\nfunction checkStartBtn(date) {\n    if (date < new Date()) {\n        activateBtn.disabled = true;\n        iziToast.error({ title: 'Ошибка', message: 'Please choose a date in the future' });\n    } else {\n        activateBtn.disabled = false;\n    }\n}\n\nfunction resetInputs() {\n    dateField.disabled = false; // Активируем поле ввода\n    activateBtn.disabled = true; // Кнопка остаётся неактивной\n}\n"],"names":["dateField","activateBtn","targetDate","calendarOptions","dates","checkStartBtn","flatpickr","startCountdown","countdownTimer","remainingTime","displayTime","resetInputs","timeValues","convertMilliseconds","ms","days","hours","minutes","seconds","padZero","value","date","iziToast"],"mappings":"+IAKA,MAAMA,EAAY,SAAS,eAAe,iBAAiB,EACrDC,EAAc,SAAS,cAAc,cAAc,EACzD,IAAIC,EAAa,KAEjB,MAAMC,EAAkB,CACpB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAO,CACXF,EAAaE,EAAM,CAAC,EACpBC,EAAcH,CAAU,CAC3B,CACL,EAEAI,EAAUN,EAAWG,CAAe,EAEpCF,EAAY,iBAAiB,QAASM,CAAc,EAEpD,SAASA,GAAiB,CACtBN,EAAY,SAAW,GACvBD,EAAU,SAAW,GAErB,MAAMQ,EAAiB,YAAY,IAAM,CACrC,MAAMC,EAAgBP,EAAa,IAAI,KAEvC,GAAIO,GAAiB,EAAG,CACpB,cAAcD,CAAc,EAC5BE,EAAY,EAAG,EAAG,EAAG,CAAC,EACtBC,IACA,MACH,CAED,MAAMC,EAAaC,EAAoBJ,CAAa,EACpDC,EAAYE,EAAW,KAAMA,EAAW,MAAOA,EAAW,QAASA,EAAW,OAAO,CACxF,EAAE,GAAI,CACX,CAEA,SAASC,EAAoBC,EAAI,CAM7B,MAAO,CACH,KAAM,KAAK,MAAMA,EAAK,KAAQ,EAC9B,MAAO,KAAK,MAAOA,EAAK,MAAY,IAAS,EAC7C,QAAS,KAAK,MAAQA,EAAK,MAAY,KAAa,GAAW,EAC/D,QAAS,KAAK,MAASA,EAAK,MAAY,KAAa,IAAe,GAAW,CACvF,CACA,CAEA,SAASJ,EAAYK,EAAMC,EAAOC,EAASC,EAAS,CAChD,SAAS,cAAc,aAAa,EAAE,YAAcC,EAAQJ,CAAI,EAChE,SAAS,cAAc,cAAc,EAAE,YAAcI,EAAQH,CAAK,EAClE,SAAS,cAAc,gBAAgB,EAAE,YAAcG,EAAQF,CAAO,EACtE,SAAS,cAAc,gBAAgB,EAAE,YAAcE,EAAQD,CAAO,CAC1E,CAEA,SAASC,EAAQC,EAAO,CACpB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASf,EAAcgB,EAAM,CACrBA,EAAO,IAAI,MACXpB,EAAY,SAAW,GACvBqB,EAAS,MAAM,CAAE,MAAO,SAAU,QAAS,oCAAoC,CAAE,GAEjFrB,EAAY,SAAW,EAE/B,CAEA,SAASU,GAAc,CACnBX,EAAU,SAAW,GACrBC,EAAY,SAAW,EAC3B"}