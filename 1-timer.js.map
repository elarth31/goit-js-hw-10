{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst dateInput = document.getElementById('datetime-picker');\nconst startButton = document.querySelector('[data-start]');\nlet selectedEndDate = null;\n\nconst datePickerOptions = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        selectedEndDate = selectedDates[0];\n        validateStartButton(selectedEndDate);\n    },\n};\n\nflatpickr(dateInput, datePickerOptions);\n\nstartButton.addEventListener('click', initiateCountdown);\n\nfunction initiateCountdown() {\n    startButton.disabled = true;\n    dateInput.disabled = true;\n\n    const countdownInterval = setInterval(() => {\n        const timeRemaining = selectedEndDate - new Date();\n\n        if (timeRemaining <= 0) {\n            clearInterval(countdownInterval);\n            updateTimerDisplay(0, 0, 0, 0);\n            resetInputs(); \n            return;\n        }\n\n        const timeParts = calculateTimeParts(timeRemaining);\n        updateTimerDisplay(timeParts.days, timeParts.hours, timeParts.minutes, timeParts.seconds);\n    }, 1000);\n}\n\nfunction calculateTimeParts(ms) {\n    const msPerSecond = 1000;\n    const msPerMinute = msPerSecond * 60;\n    const msPerHour = msPerMinute * 60;\n    const msPerDay = msPerHour * 24;\n\n    return {\n        days: Math.floor(ms / msPerDay),\n        hours: Math.floor((ms % msPerDay) / msPerHour),\n        minutes: Math.floor(((ms % msPerDay) % msPerHour) / msPerMinute),\n        seconds: Math.floor((((ms % msPerDay) % msPerHour) % msPerMinute) / msPerSecond),\n    };\n}\n\nfunction updateTimerDisplay(days, hours, minutes, seconds) {\n    document.querySelector('[data-days]').textContent = formatWithLeadingZero(days);\n    document.querySelector('[data-hours]').textContent = formatWithLeadingZero(hours);\n    document.querySelector('[data-minutes]').textContent = formatWithLeadingZero(minutes);\n    document.querySelector('[data-seconds]').textContent = formatWithLeadingZero(seconds);\n}\n\nfunction formatWithLeadingZero(value) {\n    return String(value).padStart(2, '0');\n}\n\nfunction validateStartButton(date) {\n    if (date < new Date()) {\n        startButton.disabled = true;\n        iziToast.error({\n            title: 'Ошибка',\n            message: 'Please choose a date in the future',\n            position: 'topRight', // Убедитесь, что позиция установлена\n            timeout: 5000, // Время показа уведомления\n            close: false // Отключаем возможность закрытия\n        });\n    } else {\n        startButton.disabled = false;\n    }\n}\n\nfunction resetInputs() {\n    dateInput.disabled = false; \n    startButton.disabled = true; \n}\n"],"names":["dateInput","startButton","selectedEndDate","datePickerOptions","selectedDates","validateStartButton","flatpickr","initiateCountdown","countdownInterval","timeRemaining","updateTimerDisplay","resetInputs","timeParts","calculateTimeParts","ms","days","hours","minutes","seconds","formatWithLeadingZero","value","date","iziToast"],"mappings":"+IAKA,MAAMA,EAAY,SAAS,eAAe,iBAAiB,EACrDC,EAAc,SAAS,cAAc,cAAc,EACzD,IAAIC,EAAkB,KAEtB,MAAMC,EAAoB,CACtB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBF,EAAkBE,EAAc,CAAC,EACjCC,EAAoBH,CAAe,CACtC,CACL,EAEAI,EAAUN,EAAWG,CAAiB,EAEtCF,EAAY,iBAAiB,QAASM,CAAiB,EAEvD,SAASA,GAAoB,CACzBN,EAAY,SAAW,GACvBD,EAAU,SAAW,GAErB,MAAMQ,EAAoB,YAAY,IAAM,CACxC,MAAMC,EAAgBP,EAAkB,IAAI,KAE5C,GAAIO,GAAiB,EAAG,CACpB,cAAcD,CAAiB,EAC/BE,EAAmB,EAAG,EAAG,EAAG,CAAC,EAC7BC,IACA,MACH,CAED,MAAMC,EAAYC,EAAmBJ,CAAa,EAClDC,EAAmBE,EAAU,KAAMA,EAAU,MAAOA,EAAU,QAASA,EAAU,OAAO,CAC3F,EAAE,GAAI,CACX,CAEA,SAASC,EAAmBC,EAAI,CAM5B,MAAO,CACH,KAAM,KAAK,MAAMA,EAAK,KAAQ,EAC9B,MAAO,KAAK,MAAOA,EAAK,MAAY,IAAS,EAC7C,QAAS,KAAK,MAAQA,EAAK,MAAY,KAAa,GAAW,EAC/D,QAAS,KAAK,MAASA,EAAK,MAAY,KAAa,IAAe,GAAW,CACvF,CACA,CAEA,SAASJ,EAAmBK,EAAMC,EAAOC,EAASC,EAAS,CACvD,SAAS,cAAc,aAAa,EAAE,YAAcC,EAAsBJ,CAAI,EAC9E,SAAS,cAAc,cAAc,EAAE,YAAcI,EAAsBH,CAAK,EAChF,SAAS,cAAc,gBAAgB,EAAE,YAAcG,EAAsBF,CAAO,EACpF,SAAS,cAAc,gBAAgB,EAAE,YAAcE,EAAsBD,CAAO,CACxF,CAEA,SAASC,EAAsBC,EAAO,CAClC,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASf,EAAoBgB,EAAM,CAC3BA,EAAO,IAAI,MACXpB,EAAY,SAAW,GACvBqB,EAAS,MAAM,CACX,MAAO,SACP,QAAS,qCACT,SAAU,WACV,QAAS,IACT,MAAO,EACnB,CAAS,GAEDrB,EAAY,SAAW,EAE/B,CAEA,SAASU,GAAc,CACnBX,EAAU,SAAW,GACrBC,EAAY,SAAW,EAC3B"}